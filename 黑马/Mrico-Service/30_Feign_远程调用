30 Feign
  1.依赖 : spring-cloud-starter-openfeign
  2. @EnableFeignClients
  3. FeignClient interface
  4. FeignClient方法 替代restTemplate 
   
   @SpringBootApplication
   @EnableFeignClients
   @MappingScan("cn.itcst.order.mapper")
   public class OrderApplication{
    public static void main(String[] args){
      SpringApplication.run(OrderApplication.class, args);
    }
   }
   
   @Service
   public class OrderService{

    @Autowired
    private OrderMapper orderMapper;
    @Autowird
    priavte UserClient userClient;
    
    public Order queryOrderById(Long orderId){
      Order order = orderMapper.findById(orderId);
      User user = userClient.findById(order.getUserId());
      order.setUser(user);
      return order;
    }
   }
 
  
  @FeignClient("userservice") //client
  public interface UserClient{
    @GetMapping("/user/{id}")
    User findById(@PthVariable("id") Long id);
  }
  
31 Feign setting 
    feign.Logger.level: NONE, BASIC, HEADERS, FULL
    feign.codec.Decoder: 结果: json->java obj
    feign.codec.Eecoder: java->http
    
32 Feign优化
   1. httpClient : feign-httpclient
   2. yml setting

33 best prectics
   1. interface to FeignClient & controller
      public interface UserAPI{
          @GetMapping("/user/{id}")
          User findById(@PthVariable("id") Long id);
      }
      @RestController
      public class UserController implements UserAPI{}
      
      @FeignClient(value="userservice")
      public interface UserClient extends UserAPI{}
    
    2.新建feignAPI : UserClient, pojo 
      1.依赖
        <dependency>
          <groupId>
          <artifactId>feign-api</>
      2. pojo : 
         User
            @Data
            public class User{
              private lont id;
            }
         client:
             @FeignClient(value="userservice")
             public interface UserClient extends UserAPI{
               @GetMapping("/user/{id}")
               User findById(@PthVariable("id") Long id);
             }
          settings:
              public class DefaultFeignConfiguration{
                @Bean
                public Logger.Level logLevel(){
                  return Logger.Level.BASIC;
                }
              }
        3. 让 Spring scan feignAPI的包
                                  //整个包                                       //具体class              
             @EnableFeignClients(basePackages = "cn.itcast.feign.clients") ||  (clients = {UserClient.class})
             @SpringBootApplication             
             @MappingScan("cn.itcst.order.mapper")
             public class OrderApplication{
    
    
    
    
    
    
    
